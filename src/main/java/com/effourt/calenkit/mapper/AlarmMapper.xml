<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.calendar.mapper.AlarmMapper">
    <!-- INSERT -->
    <!-- 일정 수정(1),초대(2),삭제(0) 시 호출 -->
    <insert id="save">
        INSERT INTO ALARM(AL_SCNO, AL_MID, AL_STATUS, AL_TIME, AL_CATE) VALUES(#{alScNo}, #{alMid}, 1, SYSDATE, #{alCate})
    </insert>

    <!-- UPDATE -->
    <!-- 일정 삭제 시 알림의 알림상태 0으로 변경 -->
    <update id="update">
        UPDATE ALARM SET AL_STATUS=#{alStatus} WHERE AL_NO=#{alNo}
    </update>

    <!-- DELETE -->
    <!-- 수동 알림 삭제 -->
    <delete id="delete">
        DELETE FROM ALARM WHERE AL_NO=#{alNo}
    </delete>

    <!-- SELECT -->
    <!-- 검색행 1개 -->
    <select id="findByAlNo" resultType="Alarm">
        SELECT * FROM ALARM WHERE AL_NO=#{alNo} AND AL_STATUS=1
    </select>

    <!-- SELECT -->
    <!-- 검색행 0개 이상 -->
    <select id="findByAlMid" resultType="Alarm">
        SELECT * FROM ALARM WHERE AL_MID=#{alMid} AND AL_STATUS=1
    </select>
</mapper>